<!-- References for ideas of the world map: http://bl.ocks.org/palewire/d2906de347a160f38bc0b7ca57721328 -->
<!-- References for ideas of the bar chart: https://www.d3-graph-gallery.com/graph/barplot_stacked_basicWide.html -->
<!DOCTYPE html>
<meta charset="utf-8" />
<head>
  <style>
    /* background colour set to this subtle grey */
    body {
      background-color: #f8f4f4;
    }
    h1 {
      text-align: center;
    }
    h3 {
      text-align: center;
    }
    .countries {
      fill: none;
      stroke: black;
      stroke-linejoin: round;
      stroke-width: 0.05;
    }
    .legendThreshold {
      font-size: 12px;
      font-family: sans-serif;
    }
    .caption {
      fill: #000;
      text-anchor: start;
      font-weight: bold;
    }
    /* world-map svg */
    .world-map {
      text-align: left;
      float: left;
      display: inline;
    }
    text {
      fill: black;
      font-family: sans-serif;
      font-size: 12px;
    }
    /* CSS settings for panel elements */
    .map-panel {
      width: 400px;
      height: 700px;
      padding-right: 5px;
      padding-left: 3px;
      display: inline;
      float: left;
      font-family: sans-serif;
    }
    .bar-chart-panel {
      width: 400px;
      height: 700px;
      padding-right: 5px;
      padding-left: 3px;
      display: inline;
      float: left;
      font-family: sans-serif;
    }
    .disclaimer {
      font-size: 10px;
      padding: 5px;
      margin: 0;
    }
    .gp-by-country {
      font-size: 13px;
      margin: 0px;
      padding: 5px;
      line-height: 1.6;
      color: black;
    }
    .constructors-by-country {
      font-size: 13px;
      margin: 0px;
      padding: 5px;
      line-height: 1.6;
      color: rgb(165, 165, 165);
    }
    .drivers-by-country {
      font-size: 13px;
      margin: 0px;
      padding: 5px;
      line-height: 1.6;
      color: rgb(165, 165, 165);
    }
    .panel-header {
      border-style: groove;
    }
    .bar-chart {
      text-align: left;
      float: left;
      display: inline;
    }
    .circuits {
      height: 50px;
      width: 60px;
      padding: 7px;
    }
    .circuit-block {
      text-align: left;
      height: 60px;
    }
    #gbr {
      height: 30px;
      width: 30px;
    }
    #fra {
      height: 30px;
      width: 30px;
    }
    #deu {
      height: 30px;
      width: 30px;
    }
    #ita {
      height: 30px;
      width: 30px;
    }
    .constructor-win-text {
      font-size: 13px;
      margin: 0px;
      padding: 5px;
      line-height: 1.6;
      color: black;
    }
    .bar-chart-text {
      font-size: 13px;
      margin: 0px;
      padding: 5px;
      line-height: 1.6;
      color: rgb(165, 165, 165);
    }
    a {
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>Visualisation Project Zelin Shu 28409272</h1>
  <h3>Formula One's Influences Around the World</h3>
  <!-- div for the world map svg -->
  <div class="world-map">
    <svg id="worldmap" width="1000" height="700"></svg>
  </div>
  <!-- div for the right-panel of the world map section -->
  <div class="map-panel">
    <div class="panel-header">
      <!-- Radio selectors -->
      <form>
        <div>
          <input
            type="radio"
            id="gp"
            name="map-selection"
            value="gp"
            checked="checked"
          />
          <label for="gp">GRAND PRIX BY COUNTRY</label>
        </div>
        <div>
          <input
            type="radio"
            id="constructors"
            name="map-selection"
            value="constructors"
          />
          <label for="constructors">CONSTRUCTORS BY COUNTRY</label>
        </div>
        <div>
          <input
            type="radio"
            id="drivers"
            name="map-selection"
            value="drivers"
          />
          <label for="drivers">DRIVERS BY COUNTRY</label>
        </div>
      </form>
      <p class="disclaimer">
        Data as of the end of 2020, hovering on the zoomable map for more
        information.
      </p>
      <p class="disclaimer">
        Source:
        <a
          href="https://www.kaggle.com/rohanrao/formula-1-world-championship-1950-2020"
          >https://www.kaggle.com/rohanrao/formula-1-world-championship-1950-2020</a
        >
      </p>
    </div>

    <h4 class="gp-by-country">GRAND PRIX BY COUNTRY</h4>
    <p class="gp-by-country">
      As of the end of 2020, there have been 32 countries and 76 circuits that
      have hosted a Formula One World Championship race.
      <strong>Italy has hosted most Grand Prix (100).</strong> Formula One Group
      has been trying to expand this sport to the world over the years, for
      example, races in China, Russia, Malaysia and India; however, Europe and
      North America remain the most popular places for this world's top-class
      motorsport.
    </p>
    <h4 class="constructors-by-country">CONSTRUCTORS BY COUNTRY</h4>
    <p class="constructors-by-country">
      As of the end of 2020, there have been 213 constructors that have entered
      a Formula One Grand Prix. As the home of the sport,
      <strong>the United Kingdom has the most constructors (86)</strong>. 31 out
      of 213 constructors had only participated in the Indianapolis 500 from
      1950 to 1960, and all of them were American licensed. This also makes an
      exceptional high home-winning rate: 28.21% for American teams. Another
      outliner is the Canadian team Wolf, they won the only home Grand Prix that
      they participated in, so the rate is 100% for Canada.
    </p>
    <h4 class="drivers-by-country">DRIVERS BY COUNTRY</h4>
    <p class="drivers-by-country">
      As of the end of 2020, there have been 851 drivers that have participated
      in a Formula One Grand Prix, and 165 of them are British. They have won 20
      world titles and 299 races, and 29 out of 299 are at home soil.
      <strong
        >Of all the countries that have not held a Grand Prix, Finnish drivers
        have won the most races, and that number is 56.</strong
      >
    </p>
  </div>
  <!-- div for the bar chart svg -->
  <div class="bar-chart">
    <svg id="barchart" width="1000" height="800"></svg>
  </div>

  <!-- bar chart panel settings -->
  <div class="bar-chart-panel">
    <div class="panel-header">
      <!-- Radio selectors -->
      <form>
        <div>
          <input
            type="radio"
            id="hwc"
            name="bar-selection"
            value="hwc"
            checked="checked"
          />
          <label for="gp">HOME WIN(S) BY CONSTRUCTORS</label>
        </div>
        <div>
          <input type="radio" id="hwd" name="bar-selection" value="hwd" />
          <label for="constructors">HOME WIN(S) BY DRIVERS</label>
        </div>
      </form>
      <p class="disclaimer">
        Data as of the end of 2020, hovering on the bar chart for more
        information.
      </p>
      <p class="disclaimer">
        Source:
        <a
          href="https://www.kaggle.com/rohanrao/formula-1-world-championship-1950-2020"
          >https://www.kaggle.com/rohanrao/formula-1-world-championship-1950-2020</a
        >
      </p>
    </div>

    <!-- Circuits png -->
    <div>
      <img id="gbr" src="united-kingdom.png" />
    </div>

    <div class="circuit-block">
      <img src="silverstone.png" class="circuits" />
      <img src="aintree.png" class="circuits" />
      <img src="brands_hatch.png" class="circuits" />
      <img src="donington.png" class="circuits" />
    </div>

    <div>
      <img id="fra" src="france.png" />
    </div>
    <div class="circuit-block">
      <img src="magny_cours.png" class="circuits" />
      <img src="paul_ricard.png" class="circuits" />
      <img src="dijon.png" class="circuits" />
    </div>

    <div>
      <img id="deu" src="germany.png" />
    </div>
    <div class="circuit-block">
      <img src="hockenheimring.png" class="circuits" />
      <img src="nurburgring.png" class="circuits" />
    </div>

    <div>
      <img id="ita" src="italy.png" />
    </div>
    <div class="circuit-block">
      <img src="monza.png" class="circuits" />
      <img src="imola.png" class="circuits" />
    </div>
    <p class="constructor-win-text">
      British constructors have taken the most home Grand Prix victories (42
      wins); however, the Italian team,
      <strong
        >Ferrai is the most successful constructor in their home country</strong
      >, and they have won 27 times in Italy. Only four countries' constructors
      have completed an achievement that winning a home race at more than one
      circuit, these countries are the United Kingdom, France, Germany, and
      Italy.
    </p>
    <h4 class="bar-chart-text">WINNING A HOME GRAND PRIX</h4>
    <p class="bar-chart-text">
      Winning a home Grand Prix is an extremely difficult achievement, so most
      home race winner has achieved it only once. German driver
      <strong
        >Michael Schumacher has won the race in Germany for 9 times</strong
      >
      at both Hockenheimring and N√ºrburgring. Because of the
      <a href="https://en.wikipedia.org/wiki/Indianapolis_500"
        >unique history of the Indianapolis 500 in Formula One</a
      >, most American winners are Indy 500 winners, so Mario Andretti is the
      only "real" home Grand Prix winner from America.
    </p>
  </div>
</body>

<!-- JavaScript and D3.js library links -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.js"></script>
<script type="text/javascript">
  // Get interactive buttons
  let gpRadio = document.getElementById("gp");
  let constructorRadio = document.getElementById("constructors");
  let driversRadio = document.getElementById("drivers");
  let constructorHomeWinRadio = document.getElementById("hwc");
  let driverHomeWinRadio = document.getElementById("hwd");

  // Declare coordinates of circuits
  abert_park = [144.968, -37.8497];
  sepang = [101.738, 2.76083];
  bahrain = [50.5106, 26.0325];
  catalunya = [2.26111, 41.57];
  istanbul = [29.405, 40.9517];
  monaco = [7.42056, 43.7347];
  villeneuve = [-73.5228, 45.5];
  magny_cours = [3.16361, 46.8642];
  silverstone = [-1.01694, 52.0786];
  hockenheimring = [8.56583, 49.3278];
  hungaroring = [19.2486, 47.5789];
  valencia = [-0.331667, 39.4589];
  spa = [5.97139, 50.4372];
  monza = [9.28111, 45.6156];
  marina_bay = [103.864, 1.2914];
  fuji = [138.927, 35.3717];
  shanghai = [121.22, 31.3389];
  interlagos = [-46.6997, -23.7036];
  indianapolis = [-86.2347, 39.795];
  nurburgring = [6.9475, 50.3356];
  imola = [11.7167, 44.3439];
  suzuka = [136.541, 34.8431];
  osterreichring = [14.7647, 47.2197];
  yas_marina = [54.6031, 24.4672];
  galvez = [-58.4593, -34.6943];
  jerez = [-6.03417, 36.7083];
  estoril = [-9.39417, 38.7506];
  okayama = [134.221, 34.915];
  adelaide = [138.617, -34.9272];
  kyalami = [28.0767, -25.9894];
  donington = [-1.37528, 52.8306];
  rodriguez = [-99.0907, 19.4042];
  phoenix = [-112.075, 33.4479];
  ricard = [5.79167, 43.2506];
  yeongam = [126.417, 34.7333];
  jacarepagua = [-43.395, -22.9756];
  detroit = [-83.0401, 42.3298];
  brands_hatch = [0.263056, 51.3569];
  zandvoort = [4.54092, 52.3888];
  zolder = [5.25694, 50.9894];
  dijon = [4.89913, 47.3625];
  dallas = [-96.7587, 32.7774];
  long_beach = [-118.189, 33.7651];
  las_vegas = [-115.174, 36.1162];
  jarama = [-3.58558, 40.6171];
  watkins_glen = [-76.9272, 42.3369];
  anderstorp = [13.6042, 57.2653];
  mosport = [-78.6756, 44.0481];
  montjuic = [2.15167, 41.3664];
  nivelles = [4.32694, 50.6211];
  charade = [3.03889, 45.7472];
  tremblant = [-74.6099, 46.1877];
  essarts = [1.00458, 49.3306];
  lemans = [0.224231, 47.95];
  reims = [3.93083, 49.2542];
  george = [27.8736, -33.0486];
  zeltweg = [14.7478, 47.2039];
  aintree = [-2.94056, 53.4769];
  boavista = [-8.67325, 41.1705];
  riverside = [-117.273, 33.937];
  avus = [13.2514, 52.4806];
  monsanto = [-9.20306, 38.7197];
  sebring = [-81.3483, 27.4547];
  ain_diab = [-7.6875, 33.5786];
  pescara = [14.1508, 42.475];
  bremgarten = [7.40194, 46.9589];
  pedralbes = [2.11667, 41.3903];
  buddh = [77.5331, 28.3487];
  americas = [-97.6411, 30.1328];
  red_bull_ring = [14.7647, 47.2197];
  sochi = [39.9578, 43.4057];
  port_imperial = [-74.0111, 40.7769];
  bak = [49.8533, 40.3725];
  portimao = [-8.6267, 37.227];
  mugello = [11.3719, 43.9975];

  //   Default map settings
  // The svg
  const svg = d3.select("#worldmap"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

  const g = svg.append("g");

  // svg to call the d3.zoom() function, to allow users to zoom in and out
  svg.call(
    d3
      .zoom()
      .on("zoom", () => {
        //   console.log("zoom");
        g.attr("transform", d3.event.transform);
      })
      .scaleExtent([1, 40])
  );

  // Map and projection
  const path = d3.geoPath();
  const projection = d3
    .geoNaturalEarth()
    .scale(190)
    .center([0, 0])
    .translate([width / 2, height / 2]);

  // Data and color scale
  const data = d3.map();
  const colorScale = d3
    .scaleThreshold()
    .domain([1, 10, 30, 50, 70, 100])
    .range(d3.schemeBlues[7]);

  // Legend
  g.attr("class", "legendThreshold")
    .attr("transform", "translate(20,20)")
    .append("text")
    .attr("class", "caption")
    .attr("x", 0)
    .attr("y", -6)
    .text("Number of Grand Prix Hosted");
  const labels = [
    "0",
    "1 ~ 9",
    "10 ~ 29",
    "30 ~ 49",
    "50 ~ 69",
    "70 ~ 99",
    "100",
  ];
  const legend = d3
    .legendColor()
    .labels(function (d) {
      return labels[d.i];
    })
    .shapePadding(5)
    .scale(colorScale);
  g.call(legend);

  // Load external data and boot
  d3.queue()
    .defer(d3.json, "world-110m.geojson")
    .defer(d3.csv, "numberOfRaces.csv", function (d) {
      data.set(d.code, +d.races);
    })
    .await(ready);

  function ready(error, topo) {
    // Draw the map
    g.attr("class", "countries")
      .selectAll("path")
      .data(topo.features)
      .enter()
      .append("path")
      // draw each country
      .attr("d", d3.geoPath().projection(projection))
      // set the color of each country
      .attr("fill", function (d) {
        d.total = data.get(d.id) || 0;
        return colorScale(d.total);
      })
      .append("title")
      .text(function (d) {
        switch (d.id) {
          case "AZE":
            return (
              "üá¶üáø AZERBAIJAN" +
              "\n" +
              "Races: 4" +
              "\n" +
              "First held: 2016" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Baku City Circuit"
            );
            break;
          case "ARG":
            return (
              "üá¶üá∑ ARGENTINA" +
              "\n" +
              "Races: 20" +
              "\n" +
              "First held: 1953" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Aut√≥dromo Juan y Oscar G√°lvez"
            );
            break;
          case "AUS":
            return (
              "üá¶üá∫ AUSTRALIA" +
              "\n" +
              "Races: 35" +
              "\n" +
              "First held: 1985" +
              "\n" +
              "Number of venues: 2" +
              "\n" +
              "First race at: Adelaide Street Circuit"
            );
            break;
          case "BHR":
            return (
              "üáßüá≠ BAHRAIN" +
              "\n" +
              "Races: 17" +
              "\n" +
              "First held: 2004" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Bahrain International Circuit"
            );
          case "BRA":
            return (
              "üáßüá∑ BRAZIL" +
              "\n" +
              "Races: 47" +
              "\n" +
              "First held: 1973" +
              "\n" +
              "Number of venues: 2" +
              "\n" +
              "First race at: Aut√≥dromo Jos√© Carlos Pace"
            );
            break;
          case "CAN":
            return (
              "üá®üá¶ CANADA" +
              "\n" +
              "Races: 50" +
              "\n" +
              "First held: 1967" +
              "\n" +
              "Number of venues: 3" +
              "\n" +
              "First race at: Mosport International Raceway"
            );
            break;
          case "CHN":
            return (
              "üá®üá≥ CHINA" +
              "\n" +
              "Races: 16" +
              "\n" +
              "First held: 2004" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Shanghai International Circuit"
            );
            break;
          case "AUT":
            return (
              "üá¶üáπ AUSTRIA" +
              "\n" +
              "Races: 34" +
              "\n" +
              "First held: 1964" +
              "\n" +
              "Number of venues: 3" +
              "\n" +
              "First race at: Zeltweg"
            );
            break;
          case "FRA":
            return (
              "üá´üá∑ FRANCE" +
              "\n" +
              "Races: 61" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 7" +
              "\n" +
              "First race at: Reims-Gueux"
            );
            break;
          case "DEU":
            return (
              "üá©üá™ GERMANY" +
              "\n" +
              "Races: 79" +
              "\n" +
              "First held: 1951" +
              "\n" +
              "Number of venues: 3" +
              "\n" +
              "First race at: N√ºrburgring"
            );
            break;
          case "HUN":
            return (
              "üá≠üá∫ HUNGARY" +
              "\n" +
              "Races: 35" +
              "\n" +
              "First held: 1986" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Hungaroring"
            );
            break;
          case "IND":
            return (
              "üáÆüá≥ INDIA" +
              "\n" +
              "Races: 3" +
              "\n" +
              "First held: 2011" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Buddh International Circuit"
            );
            break;
          case "ITA":
            return (
              "üáÆüáπ ITALY" +
              "\n" +
              "Races: 100" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 4" +
              "\n" +
              "First race at: Autodromo Nazionale di Monza"
            );
            break;
          case "JPN":
            return (
              "üáØüáµ JAPAN" +
              "\n" +
              "Races: 37" +
              "\n" +
              "First held: 1976" +
              "\n" +
              "Number of venues: 3" +
              "\n" +
              "First race at: Fuji Speedway"
            );
            break;
          case "KOR":
            return (
              "üá∞üá∑ SOUTH KOREA" +
              "\n" +
              "Races: 4" +
              "\n" +
              "First held: 2010" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Korean International Circuit"
            );
            break;
          case "MAR":
            return (
              "üá≤üá¶ MOROCCO" +
              "\n" +
              "Races: 1" +
              "\n" +
              "First held: 1958" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Ain Diab"
            );
            break;
          case "MEX":
            return (
              "üá≤üáΩ MEXICO" +
              "\n" +
              "Races: 20" +
              "\n" +
              "First held: 1963" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Aut√≥dromo Hermanos Rodr√≠guez"
            );
            break;
          case "MYS":
            return (
              "üá≤üáæ MALAYSIA" +
              "\n" +
              "Races: 19" +
              "\n" +
              "First held: 1999" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Sepang International Circuit"
            );
            break;
          case "BEL":
            return (
              "üáßüá™ BELGIUM" +
              "\n" +
              "Races: 65" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 3" +
              "\n" +
              "First race at: Circuit de Spa-Francorchamps"
            );
            break;
          case "MCO":
            return (
              "üá≤üá® MONACO" +
              "\n" +
              "Races: 66" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Circuit de Monaco"
            );
            break;
          case "NLD":
            return (
              "üá≥üá± NETHERLANDS" +
              "\n" +
              "Races: 30" +
              "\n" +
              "First held: 1952" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Circuit Park Zandvoort"
            );
            break;
          case "PRT":
            return (
              "üáµüáπ PORTUGAL" +
              "\n" +
              "Races: 17" +
              "\n" +
              "First held: 1958" +
              "\n" +
              "Number of venues: 4" +
              "\n" +
              "First race at: Circuito da Boavista"
            );
            break;
          case "RUS":
            return (
              "üá∑üá∫ RUSSIA" +
              "\n" +
              "Races: 7" +
              "\n" +
              "First held: 2014" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Sochi Autodrom"
            );
            break;
          case "ZAF":
            return (
              "üáøüá¶ SOUTH AFRICA" +
              "\n" +
              "Races: 23" +
              "\n" +
              "First held: 1962" +
              "\n" +
              "Number of venues: 2" +
              "\n" +
              "First race at: Prince George Circuit"
            );
            break;
          case "SGP":
            return (
              "üá∏üá¨ SINGAPORE" +
              "\n" +
              "Races: 12" +
              "\n" +
              "First held: 2008" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Marina Bay Street Circuit"
            );
            break;
          case "ESP":
            return (
              "üá™üá∏ SPAIN" +
              "\n" +
              "Races: 57" +
              "\n" +
              "First held: 1951" +
              "\n" +
              "Number of venues: 6" +
              "\n" +
              "First race at: Circuit de Pedralbes"
            );
            break;
          case "SWE":
            return (
              "üá∏üá™ SWEDEN" +
              "\n" +
              "Races: 6" +
              "\n" +
              "First held: 1973" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Scandinavian Raceway"
            );
            break;
          case "CHE":
            return (
              "üá®üá≠ SWITZERLAND" +
              "\n" +
              "Races: 5" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Circuit Bremgarten"
            );
            break;
          case "TUR":
            return (
              "üáπüá∑ TURKEY" +
              "\n" +
              "Races: 8" +
              "\n" +
              "First held: 2005" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Istanbul Park"
            );
            break;
          case "GBR":
            return (
              "üá¨üáß UNITED KINGDOM" +
              "\n" +
              "Races: 75" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 4" +
              "\n" +
              "First race at: Silverstone Circuit"
            );
            break;
          case "USA":
            return (
              "üá∫üá∏ UNITED STATES" +
              "\n" +
              "Races: 70" +
              "\n" +
              "First held: 1950" +
              "\n" +
              "Number of venues: 11" +
              "\n" +
              "First race at: Indianapolis Motor Speedway"
            );
            break;
          case "ARE":
            return (
              "üá¶üá™ UAE" +
              "\n" +
              "Races: 12" +
              "\n" +
              "First held: 2009" +
              "\n" +
              "Number of venues: 1" +
              "\n" +
              "First race at: Yas Marina Circuit"
            );
        }
      });

    // Ploting circuit points
    g.selectAll("circle")
      .data([
        abert_park,
        sepang,
        bahrain,
        catalunya,
        istanbul,
        monaco,
        villeneuve,
        magny_cours,
        silverstone,
        hockenheimring,
        hungaroring,
        valencia,
        spa,
        monza,
        marina_bay,
        fuji,
        shanghai,
        interlagos,
        indianapolis,
        nurburgring,
        imola,
        suzuka,
        osterreichring,
        yas_marina,
        galvez,
        jerez,
        estoril,
        okayama,
        adelaide,
        kyalami,
        donington,
        rodriguez,
        phoenix,
        ricard,
        yeongam,
        jacarepagua,
        detroit,
        brands_hatch,
        zandvoort,
        zolder,
        dijon,
        dallas,
        long_beach,
        las_vegas,
        jarama,
        watkins_glen,
        anderstorp,
        mosport,
        montjuic,
        nivelles,
        charade,
        tremblant,
        essarts,
        lemans,
        reims,
        george,
        zeltweg,
        aintree,
        boavista,
        riverside,
        avus,
        monsanto,
        sebring,
        ain_diab,
        pescara,
        bremgarten,
        pedralbes,
        buddh,
        americas,
        red_bull_ring,
        sochi,
        port_imperial,
        bak,
        portimao,
        mugello,
      ])
      .enter()
      .append("circle")
      .attr("cx", function (d) {
        console.log(projection(d));
        return projection(d)[0];
      })
      .attr("cy", function (d) {
        return projection(d)[1];
      })
      .attr("r", "1.8px")
      .attr("fill", "#FF8C00");
  }

  // -----------------------------------------------------
  // When user clicks "CONSTRUCTORS BY COUNTRY" radio button
  constructorRadio.addEventListener("click", function () {
    // Set colours of description text
    document.getElementsByClassName("gp-by-country")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("gp-by-country")[1].style.color =
      "rgb(165, 165, 165)";

    document.getElementsByClassName("constructors-by-country")[0].style.color =
      "black";
    document.getElementsByClassName("constructors-by-country")[1].style.color =
      "black";

    document.getElementsByClassName("drivers-by-country")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("drivers-by-country")[1].style.color =
      "rgb(165, 165, 165)";
    // Clean previous charts before drawing a new one
    d3.select("#worldmap").select("svg > *").remove();
    // The svg
    const svg = d3.select("#worldmap"),
      width = +svg.attr("width"),
      height = +svg.attr("height");

    const g = svg.append("g");

    // svg to call the d3.zoom() function, to allow users to zoom in and out
    svg.call(
      d3
        .zoom()
        .on("zoom", () => {
          //   console.log("zoom");
          g.attr("transform", d3.event.transform);
        })
        .scaleExtent([1, 40])
    );

    // Map and projection
    const path = d3.geoPath();
    const projection = d3
      .geoNaturalEarth()
      .scale(190)
      .center([0, 0])
      .translate([width / 2, height / 2]);

    // Data and color scale
    const data = d3.map();
    const colorScale = d3
      .scaleThreshold()
      .domain([1, 10, 30, 50])
      .range(d3.schemeOrRd[5]);

    // Legend
    g.attr("class", "legendThreshold")
      .attr("transform", "translate(20,20)")
      .append("text")
      .attr("class", "caption")
      .attr("x", 0)
      .attr("y", -6)
      .text("Number of Constructors");
    const labels = ["0", "Less than 10", "10 ~ 29", "30 ~ 49", "50 or more"];
    const legend = d3
      .legendColor()
      .labels(function (d) {
        return labels[d.i];
      })
      .shapePadding(5)
      .scale(colorScale);
    g.call(legend);

    // Load external data and boot
    d3.queue()
      .defer(d3.json, "world-110m.geojson")
      .defer(d3.csv, "constructorsMap.csv", function (d) {
        data.set(d.code, +d.numberOfConstructors);
      })
      .await(ready);

    function ready(error, topo) {
      // Draw the map
      g.attr("class", "countries")
        .selectAll("path")
        .data(topo.features)
        .enter()
        .append("path")
        // draw each country
        .attr("d", d3.geoPath().projection(projection))
        // set the color of each country
        .attr("fill", function (d) {
          d.total = data.get(d.id) || 0;
          return colorScale(d.total);
        })
        .append("title")
        .text(function (d) {
          switch (d.id) {
            case "AUS":
              return (
                "AUSTRALIA" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: McGuire" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "BRA":
              return (
                "BRAZIL" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Fittipaldi Automotive" +
                "\n" +
                "Home Grand Prix entry: 8" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "CAN":
              return (
                "CANADA" +
                "\n" +
                "Number of constructors: 2" +
                "\n" +
                "Constructor: Stebro, Walter Wolf Racing" +
                "\n" +
                "Home Grand Prix entry: 1" +
                "\n" +
                "Home Grand Prix win(s): 1" +
                "\n" +
                "Home Grand Prix winning rate: 100%"
              );
              break;
            case "AUT":
              return (
                "AUSTRIA" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Red Bull Racing" +
                "\n" +
                "Home Grand Prix entry: 8" +
                "\n" +
                "Home Grand Prix win(s): 2" +
                "\n" +
                "Home Grand Prix winning rate: 25%"
              );
              break;
            case "FRA":
              return (
                "FRANCE" +
                "\n" +
                "Number of constructors: 12" +
                "\n" +
                "Constructor: Renault, Venturi, Bugatti and 9 more" +
                "\n" +
                "Home Grand Prix entry: 73" +
                "\n" +
                "Home Grand Prix win(s): 6" +
                "\n" +
                "Home Grand Prix winning rate: 8.22%"
              );
              break;
            case "DEU":
              return (
                "GERMANY" +
                "\n" +
                "Number of constructors: 11" +
                "\n" +
                "Constructor: Mercedes, Porsche, Greifzu and 8 more" +
                "\n" +
                "Home Grand Prix entry: 40" +
                "\n" +
                "Home Grand Prix win(s): 5" +
                "\n" +
                "Home Grand Prix winning rate: 12.50%"
              );
              break;
            case "IND":
              return (
                "INDIA" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Force India" +
                "\n" +
                "Home Grand Prix entry: 3" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "ITA":
              return (
                "ITALY" +
                "\n" +
                "Number of constructors: 31" +
                "\n" +
                "Constructor: Ferrari, AlphaTauri, Minard and 29 more" +
                "\n" +
                "Home Grand Prix entry: 244" +
                "\n" +
                "Home Grand Prix win(s): 34" +
                "\n" +
                "Home Grand Prix winning rate: 14.00%"
              );
              break;
            case "JPN":
              return (
                "JAPAN" +
                "\n" +
                "Number of constructors: 5" +
                "\n" +
                "Constructor: Honda, Toyota, Maki and 2 more" +
                "\n" +
                "Home Grand Prix entry: 17" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "MEX":
              return (
                "MEXICO" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Rebaque" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "MYS":
              return (
                "MALAYSIA" +
                "\n" +
                "Number of constructors: 2" +
                "\n" +
                "Constructor: Caterham, Lotus" +
                "\n" +
                "Home Grand Prix entry: 5" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "BEL":
              return (
                "BELGIUM" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Ecurie Nationale Belge" +
                "\n" +
                "Home Grand Prix entry: 3" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "NLD":
              return (
                "NETHERLANDS" +
                "\n" +
                "Number of constructors: 2" +
                "\n" +
                "Constructor: Boro, Spyker F1" +
                "\n" +
                "Home Grand Prix entry: 2" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "RUS":
              return (
                "RUSSIA" +
                "\n" +
                "Number of constructors: 2" +
                "\n" +
                "Constructor: Midland, Marussia" +
                "\n" +
                "Home Grand Prix entry: 2" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "ZAF":
              return (
                "SOUTH AFRICA" +
                "\n" +
                "Number of constructors: 2" +
                "\n" +
                "Constructor: Peter de Klerk, LDS" +
                "\n" +
                "Home Grand Prix entry: 9" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "ESP":
              return (
                "SPAIN" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: HRT" +
                "\n" +
                "Home Grand Prix entry: 3" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "CHE":
              return (
                "SWITZERLAND" +
                "\n" +
                "Number of constructors: 4" +
                "\n" +
                "Constructor: HRT" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "GBR":
              return (
                "UNITED KINGDOM" +
                "\n" +
                "Number of constructors: 86" +
                "\n" +
                "Constructor: McLaren, Williams, Brabham and 83 more" +
                "\n" +
                "Home Grand Prix entry: 446" +
                "\n" +
                "Home Grand Prix win(s): 42" +
                "\n" +
                "Home Grand Prix winning rate: 9.42%"
              );
              break;
            case "USA":
              return (
                "UNITED STATES" +
                "\n" +
                "Number of constructors: 39" +
                "\n" +
                "Constructor: Haas, Kurtis, Penske and 36 more" +
                "\n" +
                "Home Grand Prix entry: 39" +
                "\n" +
                "Home Grand Prix win(s): 11" +
                "\n" +
                "Home Grand Prix winning rate: 28.21%"
              );
              break;
            case "ZWE":
              return (
                "RHODESIA" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Realpha" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "NZL":
              return (
                "NEW ZEALAND" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Amon" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "IRL":
              return (
                "IRELAND" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Jordan" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
            case "HKG":
              return (
                "HONG KONG" +
                "\n" +
                "Number of constructors: 1" +
                "\n" +
                "Constructor: Theodore" +
                "\n" +
                "Home Grand Prix entry: 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix winning rate: 0%"
              );
              break;
          }
        });
    }
  });
  // -----------------------------------------------------

  // -----------------------------------------------------
  // When user clicks "DRIVERS BY COUNTRY" radio button
  driversRadio.addEventListener("click", function () {
    // Set colours of description text
    document.getElementsByClassName("gp-by-country")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("gp-by-country")[1].style.color =
      "rgb(165, 165, 165)";

    document.getElementsByClassName("constructors-by-country")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("constructors-by-country")[1].style.color =
      "rgb(165, 165, 165)";

    document.getElementsByClassName("drivers-by-country")[0].style.color =
      "black";
    document.getElementsByClassName("drivers-by-country")[1].style.color =
      "black";
    // Clean previous charts before drawing a new one
    d3.select("#worldmap").select("svg > *").remove();
    // The svg
    const svg = d3.select("#worldmap"),
      width = +svg.attr("width"),
      height = +svg.attr("height");

    const g = svg.append("g");

    // svg to call the d3.zoom() function, to allow users to zoom in and out
    svg.call(
      d3
        .zoom()
        .on("zoom", () => {
          //   console.log("zoom");
          g.attr("transform", d3.event.transform);
        })
        .scaleExtent([1, 40])
    );

    // Map and projection
    const path = d3.geoPath();
    const projection = d3
      .geoNaturalEarth()
      .scale(190)
      .center([0, 0])
      .translate([width / 2, height / 2]);

    // Data and color scale
    const data = d3.map();
    const colorScale = d3
      .scaleThreshold()
      .domain([1, 5, 30, 70, 90, 120, 150, 170])
      .range(d3.schemePuRd[8]);

    // Legend
    g.attr("class", "legendThreshold")
      .attr("transform", "translate(20,20)")
      .append("text")
      .attr("class", "caption")
      .attr("x", 0)
      .attr("y", -6)
      .text("Number of Drivers");
    const labels = [
      "0",
      "1 ~ 4",
      "5 ~ 29",
      "30 ~ 69",
      "70 ~ 89",
      "90 ~ 119",
      "120 ~ 149",
      "150 ~ 170",
    ];
    const legend = d3
      .legendColor()
      .labels(function (d) {
        return labels[d.i];
      })
      .shapePadding(5)
      .scale(colorScale);
    g.call(legend);

    // Load external data and boot
    d3.queue()
      .defer(d3.json, "world-110m.geojson")
      .defer(d3.csv, "driversMap.csv", function (d) {
        data.set(d.code, +d.numberOfDrivers);
      })
      .await(ready);

    function ready(error, topo) {
      // Draw the map
      g.attr("class", "countries")
        .selectAll("path")
        .data(topo.features)
        .enter()
        .append("path")
        // draw each country
        .attr("d", d3.geoPath().projection(projection))
        // set the color of each country
        .attr("fill", function (d) {
          d.total = data.get(d.id) || 0;
          return colorScale(d.total);
        })
        .append("title")
        .text(function (d) {
          switch (d.id) {
            case "GBR":
              return (
                "UNITED KINGDOM" +
                "\n" +
                "Number of drivers: 165" +
                "\n" +
                "Number of titles for World Drivers' Champions: 20" +
                "\n" +
                "Grand Prix win(s): 299" +
                "\n" +
                "Home Grand Prix win(s): 29" +
                "\n" +
                "Most successful driver: Lewis Hamilton"
              );
              break;
            case "BRA":
              return (
                "BRAZIL" +
                "\n" +
                "Number of drivers: 32" +
                "\n" +
                "Number of titles for World Drivers' Champions: 8" +
                "\n" +
                "Grand Prix win(s): 101" +
                "\n" +
                "Home Grand Prix win(s): 9" +
                "\n" +
                "Most successful driver: Ayrton Senna"
              );
              break;
            case "CAN":
              return (
                "CANADA" +
                "\n" +
                "Number of drivers: 14" +
                "\n" +
                "Number of titles for World Drivers' Champions: 1" +
                "\n" +
                "Grand Prix win(s): 17" +
                "\n" +
                "Home Grand Prix win(s): 1" +
                "\n" +
                "Most successful driver: Jacques Villeneuve"
              );
              break;
            case "AUT":
              return (
                "AUSTRIA" +
                "\n" +
                "Number of drivers: 15" +
                "\n" +
                "Number of titles for World Drivers' Champions: 4" +
                "\n" +
                "Grand Prix win(s): 41" +
                "\n" +
                "Home Grand Prix win(s): 1" +
                "\n" +
                "Most successful driver: Niki Lauda"
              );
              break;
            case "FRA":
              return (
                "FRANCE" +
                "\n" +
                "Number of drivers: 73" +
                "\n" +
                "Number of titles for World Drivers' Champions: 4" +
                "\n" +
                "Grand Prix win(s): 80" +
                "\n" +
                "Home Grand Prix win(s): 8" +
                "\n" +
                "Most successful driver: Alain Prost"
              );
              break;
            case "DEU":
              return (
                "GERMANY" +
                "\n" +
                "Number of drivers: 49" +
                "\n" +
                "Number of titles for World Drivers' Champions: 12" +
                "\n" +
                "Grand Prix win(s): 179" +
                "\n" +
                "Home Grand Prix win(s): 13" +
                "\n" +
                "Most successful driver: Michael Schumacher"
              );
              break;
            case "IND":
              return (
                "INDIA" +
                "\n" +
                "Number of drivers: 2" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Narain Karthikeyan (2005)"
              );
              break;
            case "ITA":
              return (
                "ITALY" +
                "\n" +
                "Number of drivers: 99" +
                "\n" +
                "Number of titles for World Drivers' Champions: 3" +
                "\n" +
                "Grand Prix win(s): 43" +
                "\n" +
                "Home Grand Prix win(s): 6" +
                "\n" +
                "Most successful driver: Alberto Ascari"
              );
              break;
            case "ARG":
              return (
                "ARGENTINA" +
                "\n" +
                "Number of drivers: 24" +
                "\n" +
                "Number of titles for World Drivers' Champions: 5" +
                "\n" +
                "Grand Prix win(s): 38" +
                "\n" +
                "Home Grand Prix win(s): 4" +
                "\n" +
                "Most successful driver: Juan Manuel Fangio"
              );
              break;
            case "JPN":
              return (
                "JAPAN" +
                "\n" +
                "Number of drivers: 19" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Hiroshi Fushida (1975)"
              );
              break;
            case "MEX":
              return (
                "MEXICO" +
                "\n" +
                "Number of drivers: 6" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 3" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Pedro Rodr√≠guez"
              );
              break;
            case "MYS":
              return (
                "MALAYSIA" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Alex Yoong (2001)"
              );
              break;
            case "BEL":
              return (
                "BELGIUM" +
                "\n" +
                "Number of drivers: 23" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 11" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Jacky Ickx"
              );
              break;
            case "NLD":
              return (
                "NETHERLANDS" +
                "\n" +
                "Number of drivers: 17" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 10" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Max Verstappen"
              );
              break;
            case "RUS":
              return (
                "RUSSIA" +
                "\n" +
                "Number of drivers: 3" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Vitaly Petrov (2010)"
              );
              break;
            case "ZAF":
              return (
                "SOUTH AFRICA" +
                "\n" +
                "Number of drivers: 23" +
                "\n" +
                "Number of titles for World Drivers' Champions: 1" +
                "\n" +
                "Grand Prix win(s): 10" +
                "\n" +
                "Home Grand Prix win(s): 1" +
                "\n" +
                "Most successful driver: Jody Scheckter"
              );
              break;
            case "ESP":
              return (
                "SPAIN" +
                "\n" +
                "Number of drivers: 15" +
                "\n" +
                "Number of titles for World Drivers' Champions: 2" +
                "\n" +
                "Grand Prix win(s): 32" +
                "\n" +
                "Home Grand Prix win(s): 3" +
                "\n" +
                "Most successful driver: Fernando Alonso"
              );
              break;
            case "CHE":
              return (
                "SWITZERLAND" +
                "\n" +
                "Number of drivers: 23" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 7" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Clay Regazzoni"
              );
              break;
            case "USA":
              return (
                "UNITED STATES" +
                "\n" +
                "Number of drivers: 157" +
                "\n" +
                "Number of titles for World Drivers' Champions: 2" +
                "\n" +
                "Grand Prix win(s): 33" +
                "\n" +
                "Home Grand Prix win(s): 12" +
                "\n" +
                "Most successful driver: Mario Andretti"
              );
              break;
            case "ZWE":
              return (
                "RHODESIA" +
                "\n" +
                "Number of drivers: 4" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Sam Tingle (1963)"
              );
              break;
            case "NZL":
              return (
                "NEW ZEALAND" +
                "\n" +
                "Number of drivers: 9" +
                "\n" +
                "Number of titles for World Drivers' Champions: 1" +
                "\n" +
                "Grand Prix win(s): 12" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Denny Hulme"
              );
              break;
            case "IRL":
              return (
                "IRELAND" +
                "\n" +
                "Number of drivers: 5" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Joe Kelly (1950)"
              );
              break;
            case "AUS":
              return (
                "AUSTRALIA" +
                "\n" +
                "Number of drivers: 17" +
                "\n" +
                "Number of titles for World Drivers' Champions: 4" +
                "\n" +
                "Grand Prix win(s): 42" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Jack Brabham"
              );
              break;
            case "SWE":
              return (
                "SWEDEN" +
                "\n" +
                "Number of drivers: 10" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 12" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Ronnie Peterson"
              );
              break;
            case "FIN":
              return (
                "FINLAND" +
                "\n" +
                "Number of drivers: 9" +
                "\n" +
                "Number of titles for World Drivers' Champions: 4" +
                "\n" +
                "Grand Prix win(s): 56" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Mika H√§kkinen"
              );
              break;
            case "DNK":
              return (
                "DENMARK" +
                "\n" +
                "Number of drivers: 5" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Tom Bels√∏ (1973)"
              );
              break;
            case "MCO":
              return (
                "MONACO" +
                "\n" +
                "Number of drivers: 4" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 2" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Charles Leclerc"
              );
              break;
            case "PRT":
              return (
                "PORTUGAL" +
                "\n" +
                "Number of drivers: 4" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Casimiro de Oliveira (1958)"
              );
              break;
            case "URY":
              return (
                "URUGUAY" +
                "\n" +
                "Number of drivers: 4" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Eitel Cantoni (1952)"
              );
              break;
            case "COL":
              return (
                "COLOMBIA" +
                "\n" +
                "Number of drivers: 3" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 7" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Juan Pablo Montoya"
              );
              break;
            case "VEN":
              return (
                "VENEZUELA" +
                "\n" +
                "Number of drivers: 3" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 1" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Pastor Maldonado"
              );
              break;
            case "THA":
              return (
                "THAILAND" +
                "\n" +
                "Number of drivers: 2" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Birabongse Bhanudej (1950)"
              );
              break;
            case "CHL":
              return (
                "CHILE" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Eliseo Salazar (1981)"
              );
              break;
            case "CZE":
              return (
                "CZECH REPUBLIC" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Tom√°≈° Enge (2001)"
              );
              break;
            case "HUN":
              return (
                "HUNGARY" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Zsolt Baumgartner"
              );
              break;
            case "IDN":
              return (
                "INDONESIA" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Rio Haryanto (2016)"
              );
              break;
            case "LIE":
              return (
                "LIECHTENSTEIN" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 0" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "First driver: Rikky von Opel (1973)"
              );
              break;
            case "POL":
              return (
                "POLAND" +
                "\n" +
                "Number of drivers: 1" +
                "\n" +
                "Number of titles for World Drivers' Champions: 0" +
                "\n" +
                "Grand Prix win(s): 1" +
                "\n" +
                "Home Grand Prix win(s): 0" +
                "\n" +
                "Most successful driver: Robert Kubica"
              );
              break;
          }
        });
    }
  });
  // -----------------------------------------------------

  // -----------------------------------------------------
  // When user clicks "GRAND PRIX BY COUNTRY" radio button
  gpRadio.addEventListener("click", function () {
    // Set colours of description text
    document.getElementsByClassName("gp-by-country")[0].style.color = "black";
    document.getElementsByClassName("gp-by-country")[1].style.color = "black";

    document.getElementsByClassName("constructors-by-country")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("constructors-by-country")[1].style.color =
      "rgb(165, 165, 165)";

    document.getElementsByClassName("drivers-by-country")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("drivers-by-country")[1].style.color =
      "rgb(165, 165, 165)";
    // Clean previous charts before drawing a new one
    d3.select("#worldmap").select("svg > *").remove();
    // The svg
    const svg = d3.select("#worldmap"),
      width = +svg.attr("width"),
      height = +svg.attr("height");

    const g = svg.append("g");

    // svg to call the d3.zoom() function, to allow users to zoom in and out
    svg.call(
      d3
        .zoom()
        .on("zoom", () => {
          //   console.log("zoom");
          g.attr("transform", d3.event.transform);
        })
        .scaleExtent([1, 40])
    );

    // Map and projection
    const path = d3.geoPath();
    const projection = d3
      .geoNaturalEarth()
      .scale(190)
      .center([0, 0])
      .translate([width / 2, height / 2]);

    // Data and color scale
    const data = d3.map();
    const colorScale = d3
      .scaleThreshold()
      .domain([1, 10, 30, 50, 70, 100])
      .range(d3.schemeBlues[7]);

    // Legend
    g.attr("class", "legendThreshold")
      .attr("transform", "translate(20,20)")
      .append("text")
      .attr("class", "caption")
      .attr("x", 0)
      .attr("y", -6)
      .text("Number of Grand Prix Hosted");
    const labels = [
      "0",
      "1 ~ 9",
      "10 ~ 29",
      "30 ~ 49",
      "50 ~ 69",
      "70 ~ 99",
      "100",
    ];
    const legend = d3
      .legendColor()
      .labels(function (d) {
        return labels[d.i];
      })
      .shapePadding(5)
      .scale(colorScale);
    g.call(legend);

    // Load external data and boot
    d3.queue()
      .defer(d3.json, "world-110m.geojson")
      .defer(d3.csv, "numberOfRaces.csv", function (d) {
        data.set(d.code, +d.races);
      })
      .await(ready);

    function ready(error, topo) {
      // Draw the map
      g.attr("class", "countries")
        .selectAll("path")
        .data(topo.features)
        .enter()
        .append("path")
        // draw each country
        .attr("d", d3.geoPath().projection(projection))
        // set the color of each country
        .attr("fill", function (d) {
          d.total = data.get(d.id) || 0;
          return colorScale(d.total);
        })
        .append("title")
        .text(function (d) {
          switch (d.id) {
            case "AZE":
              return (
                "üá¶üáø AZERBAIJAN" +
                "\n" +
                "Races: 4" +
                "\n" +
                "First held: 2016" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Baku City Circuit"
              );
              break;
            case "ARG":
              return (
                "üá¶üá∑ ARGENTINA" +
                "\n" +
                "Races: 20" +
                "\n" +
                "First held: 1953" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Aut√≥dromo Juan y Oscar G√°lvez"
              );
              break;
            case "AUS":
              return (
                "üá¶üá∫ AUSTRALIA" +
                "\n" +
                "Races: 35" +
                "\n" +
                "First held: 1985" +
                "\n" +
                "Number of venues: 2" +
                "\n" +
                "First race at: Adelaide Street Circuit"
              );
              break;
            case "BHR":
              return (
                "üáßüá≠ BAHRAIN" +
                "\n" +
                "Races: 17" +
                "\n" +
                "First held: 2004" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Bahrain International Circuit"
              );
            case "BRA":
              return (
                "üáßüá∑ BRAZIL" +
                "\n" +
                "Races: 47" +
                "\n" +
                "First held: 1973" +
                "\n" +
                "Number of venues: 2" +
                "\n" +
                "First race at: Aut√≥dromo Jos√© Carlos Pace"
              );
              break;
            case "CAN":
              return (
                "üá®üá¶ CANADA" +
                "\n" +
                "Races: 50" +
                "\n" +
                "First held: 1967" +
                "\n" +
                "Number of venues: 3" +
                "\n" +
                "First race at: Mosport International Raceway"
              );
              break;
            case "CHN":
              return (
                "üá®üá≥ CHINA" +
                "\n" +
                "Races: 16" +
                "\n" +
                "First held: 2004" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Shanghai International Circuit"
              );
              break;
            case "AUT":
              return (
                "üá¶üáπ AUSTRIA" +
                "\n" +
                "Races: 34" +
                "\n" +
                "First held: 1964" +
                "\n" +
                "Number of venues: 3" +
                "\n" +
                "First race at: Zeltweg"
              );
              break;
            case "FRA":
              return (
                "üá´üá∑ FRANCE" +
                "\n" +
                "Races: 61" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 7" +
                "\n" +
                "First race at: Reims-Gueux"
              );
              break;
            case "DEU":
              return (
                "üá©üá™ GERMANY" +
                "\n" +
                "Races: 79" +
                "\n" +
                "First held: 1951" +
                "\n" +
                "Number of venues: 3" +
                "\n" +
                "First race at: N√ºrburgring"
              );
              break;
            case "HUN":
              return (
                "üá≠üá∫ HUNGARY" +
                "\n" +
                "Races: 35" +
                "\n" +
                "First held: 1986" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Hungaroring"
              );
              break;
            case "IND":
              return (
                "üáÆüá≥ INDIA" +
                "\n" +
                "Races: 3" +
                "\n" +
                "First held: 2011" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Buddh International Circuit"
              );
              break;
            case "ITA":
              return (
                "üáÆüáπ ITALY" +
                "\n" +
                "Races: 100" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 4" +
                "\n" +
                "First race at: Autodromo Nazionale di Monza"
              );
              break;
            case "JPN":
              return (
                "üáØüáµ JAPAN" +
                "\n" +
                "Races: 37" +
                "\n" +
                "First held: 1976" +
                "\n" +
                "Number of venues: 3" +
                "\n" +
                "First race at: Fuji Speedway"
              );
              break;
            case "KOR":
              return (
                "üá∞üá∑ SOUTH KOREA" +
                "\n" +
                "Races: 4" +
                "\n" +
                "First held: 2010" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Korean International Circuit"
              );
              break;
            case "MAR":
              return (
                "üá≤üá¶ MOROCCO" +
                "\n" +
                "Races: 1" +
                "\n" +
                "First held: 1958" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Ain Diab"
              );
              break;
            case "MEX":
              return (
                "üá≤üáΩ MEXICO" +
                "\n" +
                "Races: 20" +
                "\n" +
                "First held: 1963" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Aut√≥dromo Hermanos Rodr√≠guez"
              );
              break;
            case "MYS":
              return (
                "üá≤üáæ MALAYSIA" +
                "\n" +
                "Races: 19" +
                "\n" +
                "First held: 1999" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Sepang International Circuit"
              );
              break;
            case "BEL":
              return (
                "üáßüá™ BELGIUM" +
                "\n" +
                "Races: 65" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 3" +
                "\n" +
                "First race at: Circuit de Spa-Francorchamps"
              );
              break;
            case "MCO":
              return (
                "üá≤üá® MONACO" +
                "\n" +
                "Races: 66" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Circuit de Monaco"
              );
              break;
            case "NLD":
              return (
                "üá≥üá± NETHERLANDS" +
                "\n" +
                "Races: 30" +
                "\n" +
                "First held: 1952" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Circuit Park Zandvoort"
              );
              break;
            case "PRT":
              return (
                "üáµüáπ PORTUGAL" +
                "\n" +
                "Races: 17" +
                "\n" +
                "First held: 1958" +
                "\n" +
                "Number of venues: 4" +
                "\n" +
                "First race at: Circuito da Boavista"
              );
              break;
            case "RUS":
              return (
                "üá∑üá∫ RUSSIA" +
                "\n" +
                "Races: 7" +
                "\n" +
                "First held: 2014" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Sochi Autodrom"
              );
              break;
            case "ZAF":
              return (
                "üáøüá¶ SOUTH AFRICA" +
                "\n" +
                "Races: 23" +
                "\n" +
                "First held: 1962" +
                "\n" +
                "Number of venues: 2" +
                "\n" +
                "First race at: Prince George Circuit"
              );
              break;
            case "SGP":
              return (
                "üá∏üá¨ SINGAPORE" +
                "\n" +
                "Races: 12" +
                "\n" +
                "First held: 2008" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Marina Bay Street Circuit"
              );
              break;
            case "ESP":
              return (
                "üá™üá∏ SPAIN" +
                "\n" +
                "Races: 57" +
                "\n" +
                "First held: 1951" +
                "\n" +
                "Number of venues: 6" +
                "\n" +
                "First race at: Circuit de Pedralbes"
              );
              break;
            case "SWE":
              return (
                "üá∏üá™ SWEDEN" +
                "\n" +
                "Races: 6" +
                "\n" +
                "First held: 1973" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Scandinavian Raceway"
              );
              break;
            case "CHE":
              return (
                "üá®üá≠ SWITZERLAND" +
                "\n" +
                "Races: 5" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Circuit Bremgarten"
              );
              break;
            case "TUR":
              return (
                "üáπüá∑ TURKEY" +
                "\n" +
                "Races: 8" +
                "\n" +
                "First held: 2005" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Istanbul Park"
              );
              break;
            case "GBR":
              return (
                "üá¨üáß UNITED KINGDOM" +
                "\n" +
                "Races: 75" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 4" +
                "\n" +
                "First race at: Silverstone Circuit"
              );
              break;
            case "USA":
              return (
                "üá∫üá∏ UNITED STATES" +
                "\n" +
                "Races: 70" +
                "\n" +
                "First held: 1950" +
                "\n" +
                "Number of venues: 11" +
                "\n" +
                "First race at: Indianapolis Motor Speedway"
              );
              break;
            case "ARE":
              return (
                "üá¶üá™ UAE" +
                "\n" +
                "Races: 12" +
                "\n" +
                "First held: 2009" +
                "\n" +
                "Number of venues: 1" +
                "\n" +
                "First race at: Yas Marina Circuit"
              );
          }
        });

      // Ploting circuit points
      g.selectAll("circle")
        .data([
          abert_park,
          sepang,
          bahrain,
          catalunya,
          istanbul,
          monaco,
          villeneuve,
          magny_cours,
          silverstone,
          hockenheimring,
          hungaroring,
          valencia,
          spa,
          monza,
          marina_bay,
          fuji,
          shanghai,
          interlagos,
          indianapolis,
          nurburgring,
          imola,
          suzuka,
          osterreichring,
          yas_marina,
          galvez,
          jerez,
          estoril,
          okayama,
          adelaide,
          kyalami,
          donington,
          rodriguez,
          phoenix,
          ricard,
          yeongam,
          jacarepagua,
          detroit,
          brands_hatch,
          zandvoort,
          zolder,
          dijon,
          dallas,
          long_beach,
          las_vegas,
          jarama,
          watkins_glen,
          anderstorp,
          mosport,
          montjuic,
          nivelles,
          charade,
          tremblant,
          essarts,
          lemans,
          reims,
          george,
          zeltweg,
          aintree,
          boavista,
          riverside,
          avus,
          monsanto,
          sebring,
          ain_diab,
          pescara,
          bremgarten,
          pedralbes,
          buddh,
          americas,
          red_bull_ring,
          sochi,
          port_imperial,
          bak,
          portimao,
          mugello,
        ])
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          console.log(projection(d));
          return projection(d)[0];
        })
        .attr("cy", function (d) {
          return projection(d)[1];
        })
        .attr("r", "1.8px")
        .attr("fill", "#FF8C00");
    }
  });
  // -----------------------------------------------------

  // ----------------- Code below is for the bar chart -----------------
  // Default bar chart
  // append the svg object to the body of the page
  const svg2 = d3.select("#barchart");

  // Parse the Data
  d3.csv("constructorHomeWin.csv", function (data) {
    // List of subgroups = header of the csv files = soil condition here
    let subgroups = data.columns.slice(1);
    console.log(subgroups);

    // List of groups = species here = value of the first column called group -> I show them on the X axis
    let groups = d3
      .map(data, function (d) {
        return d.group;
      })
      .keys();
    //   console.log(groups);

    // Add X axis
    let x = d3.scaleBand().domain(groups).range([0, 950]).padding([0.5]);
    svg2
      .append("g")
      .attr("transform", "translate(0," + 760 + ")")
      .call(d3.axisBottom(x).tickSizeOuter(0));

    // Add Y axis
    let y = d3.scaleLinear().domain([0, 45]).range([760, 0]);
    svg2.append("g").call(d3.axisLeft(y));

    // color palette = one color per subgroup
    let color = d3
      .scaleOrdinal()
      .domain(subgroups)
      .range([
        "#3c5b87",
        "#566091",
        "#6f6598",
        "#a06d9e",
        "#b6719d",
        "#ca779a",
        "#dc7e94",
        "#ea878e",
        "#fca080",
        "#ffaf7b",
      ]);

    //stack the data? --> stack per subgroup
    let stackedData = d3.stack().keys(subgroups)(data);

    // Show the bars
    svg2
      .append("g")
      .selectAll("g")
      // Enter in the stack data = loop key per key = group per group
      .data(stackedData)
      .enter()
      .append("g")
      .attr("fill", function (d) {
        return color(d.key);
      })
      .selectAll("rect")
      // enter a second time = loop subgroup per subgroup to add all rectangles
      .data(function (d) {
        return d;
      })
      .enter()
      .append("rect")
      .attr("x", function (d) {
        return x(d.data.group);
      })
      .attr("y", function (d) {
        return y(d[1]);
      })
      .attr("height", function (d) {
        return y(d[0]) - y(d[1]);
      })
      .attr("width", x.bandwidth())
      .append("title")
      .text(function (d) {
        switch (d.data.group) {
          case "üá¨üáß British":
            return (
              "Barbham 1 win" +
              "\n" +
              "European Grand Prix: 1983." +
              "\n" +
              "\n" +
              "Barbham-Repco 1 win" +
              "\n" +
              "British Grand Prix: 1966." +
              "\n" +
              "\n" +
              "Vanwall 2 wins" +
              "\n" +
              "British Grand Prix: 1957 (a car shared by 2 drivers)." +
              "\n" +
              "\n" +
              "Tyrrell 2 wins" +
              "\n" +
              "British Grand Prix: 1971, 1974." +
              "\n" +
              "\n" +
              "Cooper-Climax 2 wins" +
              "\n" +
              "British Grand Prix: 1959, 1960." +
              "\n" +
              "\n" +
              "Team Lotus 2 wins" +
              "\n" +
              "British Grand Prix: 1970, 1972." +
              "\n" +
              "\n" +
              "Lotus-Ford 2 wins" +
              "\n" +
              "British Grand Prix: 1967, 1968." +
              "\n" +
              "\n" +
              "Lotus-Climax 4 wins" +
              "\n" +
              "British Grand Prix: 1962, 1963, 1964, 1965." +
              "\n" +
              "\n" +
              "Williams 11 wins" +
              "\n" +
              "British Grand Prix: 1979, 1980, 1986, 1987, 1991, 1992, 1993, 1994, 1996, 1997." +
              "\n" +
              "European Grand Prix: 1985." +
              "\n" +
              "\n" +
              "McLaren 14 wins" +
              "\n" +
              "British Grand Prix: 1973, 1975, 1977, 1981, 1982, 1984, 1985, 1988, 1989, 1999, 2000, 2001, 2005, 2008." +
              "\n" +
              "European Grand Prix: 1993."
            );
            break;
          case "üáÆüáπ Italian":
            return (
              "AlphaTauri 1 win" +
              "\n" +
              "Italian Grand Prix: 2020." +
              "\n" +
              "\n" +
              "Toro Rosso 1 win" +
              "\n" +
              "Italian Grand Prix: 2008." +
              "\n" +
              "\n" +
              "Alfa Romeo 1 win" +
              "\n" +
              "Italian Grand Prix: 1950." +
              "\n" +
              "\n" +
              "Maserati 2 wins" +
              "\n" +
              "Italian Grand Prix: 1953, 1956." +
              "\n" +
              "\n" +
              "Benetton 2 wins" +
              "\n" +
              "Italian Grand Prix: 1995." +
              "\n" +
              "San Marino Grand Prix: 1994." +
              "\n" +
              "\n" +
              "Ferrari 27 wins" +
              "\n" +
              "Italian Grand Prix: 1951, 1952, 1960, 1961, 1964, 1966, 1970, 1975, 1979, 1988, 1996, 1998, 2000, 2002, 2003, 2004, 2006, 2010, 2019." +
              "\n" +
              "San Marino Grand Prix: 1982, 1983, 1999, 2000, 2002, 2003, 2004, 2006."
            );
            break;
          case "üá∫üá∏ American":
            return (
              "Kuzma 1 win" +
              "\n" +
              "Indianapolis 500: 1952." +
              "\n" +
              "\n" +
              "Epperly 2 wins" +
              "\n" +
              "Indianapolis 500: 1958, 1957." +
              "\n" +
              "\n" +
              "Watson 3 wins" +
              "\n" +
              "Indianapolis 500: 1956, 1959, 1960." +
              "\n" +
              "\n" +
              "Kurtis Kraft 5 wins" +
              "\n" +
              "Indianapolis 500: 1950, 1951, 1953, 1954, 1955."
            );
            break;
          case "üá´üá∑ French":
            return (
              "Matra-Ford 1 win" +
              "\n" +
              "French Grand Prix: 1969." +
              "\n" +
              "\n" +
              "Renault 5 wins" +
              "\n" +
              "French Grand Prix: 1979, 1981, 1982, 1983, 2005."
            );
            break;
          case "üá©üá™ German":
            return (
              "Mercedes 5 wins" +
              "\n" +
              "German Grand Prix: 1954, 2014, 2016, 2018." +
              "\n" +
              "Eifel Grand Prix: 2020"
            );
            break;
          case "üá¶üáπ Austrian":
            return "Red Bull 2 wins" + "\n" + "Austrian Grand Prix: 2018, 2019";
            break;
          case "üá®üá¶ Canadian":
            return "Wolf 1 win" + "\n" + "Canadian Grand Prix: 1977";
        }
      });
  });

  // -----------------------------------------------------
  // When user clicks "HOME WIN(S) BY DRIVERS" radio button
  driverHomeWinRadio.addEventListener("click", function () {
    homeWinByDriversSelected();
    // Clean previous svg
    d3.select("#barchart").selectAll("svg > *").remove();

    // append the svg object to the body of the page
    const svg2 = d3.select("#barchart");

    // Parse the Data
    d3.csv("driverHomeWin.csv", function (data) {
      // List of subgroups = header of the csv files = soil condition here
      let subgroups = data.columns.slice(1);
      console.log(subgroups);

      // List of groups = species here = value of the first column called group -> I show them on the X axis
      let groups = d3
        .map(data, function (d) {
          return d.group;
        })
        .keys();
      //   console.log(groups);

      // Add X axis
      let x = d3.scaleBand().domain(groups).range([0, 1000]).padding([0.5]);
      svg2
        .append("g")
        .attr("transform", "translate(0," + 760 + ")")
        .call(d3.axisBottom(x).tickSizeOuter(0));

      // Add Y axis
      let y = d3.scaleLinear().domain([0, 35]).range([760, 0]);
      svg2.append("g").call(d3.axisLeft(y));

      // color palette = one color per subgroup
      let color = d3
        .scaleOrdinal()
        .domain(subgroups)
        .range([
          "#2c3e50",
          "#264c62",
          "#155c73",
          "#006b81",
          "#007b8a",
          "#008c90",
          "#009b91",
          "#00ab8d",
          "#28ba86",
          "#57c87c",
          "#7fd570",
          "#a8e063",
        ]);

      //stack the data? --> stack per subgroup
      let stackedData = d3.stack().keys(subgroups)(data);

      // Show the bars
      svg2
        .append("g")
        .selectAll("g")
        // Enter in the stack data = loop key per key = group per group
        .data(stackedData)
        .enter()
        .append("g")
        .attr("fill", function (d) {
          return color(d.key);
        })
        .selectAll("rect")
        // enter a second time = loop subgroup per subgroup to add all rectangles
        .data(function (d) {
          return d;
        })
        .enter()
        .append("rect")
        .attr("x", function (d) {
          return x(d.data.group);
        })
        .attr("y", function (d) {
          return y(d[1]);
        })
        .attr("height", function (d) {
          return y(d[0]) - y(d[1]);
        })
        .attr("width", x.bandwidth())
        .append("title")
        .text(function (d) {
          //   console.log(d.data);
          switch (d.data.group) {
            case "üá¨üáß British":
              return (
                "DAMON HILL 1 win" +
                "\n" +
                "British Grand Prix: 1994." +
                "\n" +
                "\n" +
                "JAMES HUNT 1 win" +
                "\n" +
                "British Grand Prix: 1977." +
                "\n" +
                "\n" +
                "JOHN WATSON 1 win" +
                "\n" +
                "British Grand Prix: 1981." +
                "\n" +
                "\n" +
                "JOHNNY HERBERT 1 win" +
                "\n" +
                "British Grand Prix: 1995." +
                "\n" +
                "\n" +
                "PETER COLLINS 1 win" +
                "\n" +
                "British Grand Prix: 1958." +
                "\n" +
                "\n" +
                "TONY BROOKS 1 win" +
                "\n" +
                "British Grand Prix: 1957." +
                "\n" +
                "\n" +
                "DAVID COULTHARD 2 wins" +
                "\n" +
                "British Grand Prix: 1999, 2000." +
                "\n" +
                "\n" +
                "JACKIE STEWART 2 wins" +
                "\n" +
                "British Grand Prix: 1969, 1971." +
                "\n" +
                "\n" +
                "STIRLING MOSS 2 wins" +
                "\n" +
                "British Grand Prix: 1955, 1957." +
                "\n" +
                "\n" +
                "NIGEL MANSELL 5 wins" +
                "\n" +
                "British Grand Prix: 1986, 1987, 1991, 1992." +
                "\n" +
                "European Grand Prix: 1985" +
                "\n" +
                "\n" +
                "JIM CLARK 5 wins" +
                "\n" +
                "British Grand Prix: 1962, 1963, 1964, 1965, 1967." +
                "\n" +
                "\n" +
                "LEWIS HAMILTON 7 wins" +
                "\n" +
                "British Grand Prix: 2008, 2014, 2015, 2016, 2017, 2019, 2020."
              );
              break;
            case "üá©üá™ German":
              return (
                "NICO ROSBERG 1 win" +
                "\n" +
                "German Grand Prix: 2014." +
                "\n" +
                "\n" +
                "SEBASTIAN VETTEL 1 win" +
                "\n" +
                "German Grand Prix: 2013." +
                "\n" +
                "\n" +
                "RALF SCHUMACHER 2 wins" +
                "\n" +
                "German Grand Prix: 2001." +
                "\n" +
                "European Grand Prix: 2003." +
                "\n" +
                "\n" +
                "MICHAEL SCHUMACHER 9 wins" +
                "\n" +
                "German Grand Prix: 1995, 2002, 2004, 2006." +
                "\n" +
                "European Grand Prix: 1995, 2000, 2001, 2004, 2006"
              );
              break;
            case "üá∫üá∏ American":
              return (
                "TROY RUTTMAN 1 win" +
                "\n" +
                "Indianapolis 500: 1952." +
                "\n" +
                "\n" +
                "SAM HANKS 1 win" +
                "\n" +
                "Indianapolis 500: 1957." +
                "\n" +
                "\n" +
                "RODGER WARD 1 win" +
                "\n" +
                "Indianapolis 500: 1959." +
                "\n" +
                "\n" +
                "PAT FLAHERTY 1 win" +
                "\n" +
                "Indianapolis 500: 1956." +
                "\n" +
                "\n" +
                "MARIO ANDRETTI 1 win" +
                "\n" +
                "United States Grand Prix West: 1977." +
                "\n" +
                "\n" +
                "LEE WALLARD 1 win" +
                "\n" +
                "Indianapolis 500: 1951." +
                "\n" +
                "\n" +
                "JOHNNIE PARSONS 1 win" +
                "\n" +
                "Indianapolis 500: 1950." +
                "\n" +
                "\n" +
                "JIMMY BRYAN 1 win" +
                "\n" +
                "Indianapolis 500: 1958." +
                "\n" +
                "\n" +
                "JIM RATHMANN 1 win" +
                "\n" +
                "Indianapolis 500: 1960." +
                "\n" +
                "\n" +
                "BOB SWEIKERT 1 win" +
                "\n" +
                "Indianapolis 500: 1955." +
                "\n" +
                "\n" +
                "BILL VUKOVICH 2 wins" +
                "\n" +
                "Indianapolis 500: 1953, 1954."
              );
              break;
            case "üáßüá∑ Brazilian":
              return (
                "CARLOS PACE 1 win" +
                "\n" +
                "Brazilian Grand Prix: 1975." +
                "\n" +
                "\n" +
                "FELIPE MASSA 2 wins" +
                "\n" +
                "Brazilian Grand Prix: 2006, 2008." +
                "\n" +
                "\n" +
                "NELSON PIQUET 2 wins" +
                "\n" +
                "Brazilian Grand Prix: 1983, 1986." +
                "\n" +
                "\n" +
                "EMERSON FITTIPALDI 2 wins" +
                "\n" +
                "Brazilian Grand Prix: 1973, 1974." +
                "\n" +
                "\n" +
                "AYRTON SENNA 2 wins" +
                "\n" +
                "Brazilian Grand Prix: 1991, 1993."
              );
              break;
            case "üá´üá∑ French":
              return (
                "REN√â ARNOUX 1 win" +
                "\n" +
                "French Grand Prix: 1982." +
                "\n" +
                "\n" +
                "JEAN-PIERRE JABOUILLE 1 win" +
                "\n" +
                "French Grand Prix: 1979." +
                "\n" +
                "\n" +
                "ALAIN PROST 6 wins" +
                "\n" +
                "French Grand Prix: 1981, 1983, 1988, 1989, 1990, 1993."
              );
              break;
            case "üáÆüáπ Italian":
              return (
                "RICCARDO PATRESE 1 win" +
                "\n" +
                "San Marino Grand Prix: 1990." +
                "\n" +
                "\n" +
                "ELIO DE ANGELIS 1 win" +
                "\n" +
                "San Marino Grand Prix: 1985." +
                "\n" +
                "\n" +
                "GIUSEPPE FARINA 1 win" +
                "\n" +
                "Italian Grand Prix: 1950." +
                "\n" +
                "\n" +
                "LUDOVICO SCARFIOTTI 1 win" +
                "\n" +
                "Italian Grand Prix: 1966." +
                "\n" +
                "\n" +
                "ALBERTO ASCARI 2 wins" +
                "\n" +
                "Italian Grand Prix: 1951, 1952."
              );
              break;
            case "üá¶üá∑ Argentine":
              return (
                "JUAN MANUEL FANGIO 4 wins" +
                "\n" +
                "Argentine Grand Prix: 1954, 1955, 1956, 1957."
              );
              break;
            case "üá™üá∏ Spanish":
              return (
                "FERNANDO ALONSO 3 wins" +
                "\n" +
                "Spanish Grand Prix: 2006, 2013." +
                "\n" +
                "European Grand Prix: 2012"
              );
              break;
            case "üá¶üáπ Austrian":
              return "NIKI LAUDA 1 win" + "\n" + "Austrian Grand Prix: 1984.";
              break;
            case "üá®üá¶ Canadian":
              return (
                "GILLES VILLENEUVE 1 win" + "\n" + "Canadian Grand Prix: 1978."
              );
              break;
            case "üáøüá¶ South African":
              return (
                "JODY SCHECKTER 1 win" +
                "\n" +
                "South African Grand Prix: 1975."
              );
          }
        });
    });
  });

  // -----------------------------------------------------
  // When user clicks "HOME WIN(S) BY CONSTRUCTORS" radio button
  constructorHomeWinRadio.addEventListener("click", function () {
    homeWinByConstructorsSelected();
    // Clean previous svg
    d3.select("#barchart").selectAll("svg > *").remove();
    // append the svg object to the body of the page
    const svg2 = d3.select("#barchart");

    // Parse the Data
    d3.csv("constructorHomeWin.csv", function (data) {
      // List of subgroups = header of the csv files = soil condition here
      let subgroups = data.columns.slice(1);
      console.log(subgroups);

      // List of groups = species here = value of the first column called group -> I show them on the X axis
      let groups = d3
        .map(data, function (d) {
          return d.group;
        })
        .keys();
      //   console.log(groups);

      // Add X axis
      let x = d3.scaleBand().domain(groups).range([0, 950]).padding([0.5]);
      svg2
        .append("g")
        .attr("transform", "translate(0," + 760 + ")")
        .call(d3.axisBottom(x).tickSizeOuter(0));

      // Add Y axis
      let y = d3.scaleLinear().domain([0, 45]).range([760, 0]);
      svg2.append("g").call(d3.axisLeft(y));

      // color palette = one color per subgroup
      let color = d3
        .scaleOrdinal()
        .domain(subgroups)
        .range([
          "#3c5b87",
          "#566091",
          "#6f6598",
          "#a06d9e",
          "#b6719d",
          "#ca779a",
          "#dc7e94",
          "#ea878e",
          "#fca080",
          "#ffaf7b",
        ]);

      //stack the data? --> stack per subgroup
      let stackedData = d3.stack().keys(subgroups)(data);

      // Show the bars
      svg2
        .append("g")
        .selectAll("g")
        // Enter in the stack data = loop key per key = group per group
        .data(stackedData)
        .enter()
        .append("g")
        .attr("fill", function (d) {
          return color(d.key);
        })
        .selectAll("rect")
        // enter a second time = loop subgroup per subgroup to add all rectangles
        .data(function (d) {
          return d;
        })
        .enter()
        .append("rect")
        .attr("x", function (d) {
          return x(d.data.group);
        })
        .attr("y", function (d) {
          return y(d[1]);
        })
        .attr("height", function (d) {
          return y(d[0]) - y(d[1]);
        })
        .attr("width", x.bandwidth())
        .append("title")
        .text(function (d) {
          switch (d.data.group) {
            case "üá¨üáß British":
              return (
                "Barbham 1 win" +
                "\n" +
                "European Grand Prix: 1983." +
                "\n" +
                "\n" +
                "Barbham-Repco 1 win" +
                "\n" +
                "British Grand Prix: 1966." +
                "\n" +
                "\n" +
                "Vanwall 2 wins" +
                "\n" +
                "British Grand Prix: 1957 (a car shared by 2 drivers)." +
                "\n" +
                "\n" +
                "Tyrrell 2 wins" +
                "\n" +
                "British Grand Prix: 1971, 1974." +
                "\n" +
                "\n" +
                "Cooper-Climax 2 wins" +
                "\n" +
                "British Grand Prix: 1959, 1960." +
                "\n" +
                "\n" +
                "Team Lotus 2 wins" +
                "\n" +
                "British Grand Prix: 1970, 1972." +
                "\n" +
                "\n" +
                "Lotus-Ford 2 wins" +
                "\n" +
                "British Grand Prix: 1967, 1968." +
                "\n" +
                "\n" +
                "Lotus-Climax 4 wins" +
                "\n" +
                "British Grand Prix: 1962, 1963, 1964, 1965." +
                "\n" +
                "\n" +
                "Williams 11 wins" +
                "\n" +
                "British Grand Prix: 1979, 1980, 1986, 1987, 1991, 1992, 1993, 1994, 1996, 1997." +
                "\n" +
                "European Grand Prix: 1985." +
                "\n" +
                "\n" +
                "McLaren 14 wins" +
                "\n" +
                "British Grand Prix: 1973, 1975, 1977, 1981, 1982, 1984, 1985, 1988, 1989, 1999, 2000, 2001, 2005, 2008." +
                "\n" +
                "European Grand Prix: 1993."
              );
              break;
            case "üáÆüáπ Italian":
              return (
                "AlphaTauri 1 win" +
                "\n" +
                "Italian Grand Prix: 2020." +
                "\n" +
                "\n" +
                "Toro Rosso 1 win" +
                "\n" +
                "Italian Grand Prix: 2008." +
                "\n" +
                "\n" +
                "Alfa Romeo 1 win" +
                "\n" +
                "Italian Grand Prix: 1950." +
                "\n" +
                "\n" +
                "Maserati 2 wins" +
                "\n" +
                "Italian Grand Prix: 1953, 1956." +
                "\n" +
                "\n" +
                "Benetton 2 wins" +
                "\n" +
                "Italian Grand Prix: 1995." +
                "\n" +
                "San Marino Grand Prix: 1994." +
                "\n" +
                "\n" +
                "Ferrari 27 wins" +
                "\n" +
                "Italian Grand Prix: 1951, 1952, 1960, 1961, 1964, 1966, 1970, 1975, 1979, 1988, 1996, 1998, 2000, 2002, 2003, 2004, 2006, 2010, 2019." +
                "\n" +
                "San Marino Grand Prix: 1982, 1983, 1999, 2000, 2002, 2003, 2004, 2006."
              );
              break;
            case "üá∫üá∏ American":
              return (
                "Kuzma 1 win" +
                "\n" +
                "Indianapolis 500: 1952." +
                "\n" +
                "\n" +
                "Epperly 2 wins" +
                "\n" +
                "Indianapolis 500: 1958, 1957." +
                "\n" +
                "\n" +
                "Watson 3 wins" +
                "\n" +
                "Indianapolis 500: 1956, 1959, 1960." +
                "\n" +
                "\n" +
                "Kurtis Kraft 5 wins" +
                "\n" +
                "Indianapolis 500: 1950, 1951, 1953, 1954, 1955."
              );
              break;
            case "üá´üá∑ French":
              return (
                "Matra-Ford 1 win" +
                "\n" +
                "French Grand Prix: 1969." +
                "\n" +
                "\n" +
                "Renault 5 wins" +
                "\n" +
                "French Grand Prix: 1979, 1981, 1982, 1983, 2005."
              );
              break;
            case "üá©üá™ German":
              return (
                "Mercedes 5 wins" +
                "\n" +
                "German Grand Prix: 1954, 2014, 2016, 2018." +
                "\n" +
                "Eifel Grand Prix: 2020"
              );
              break;
            case "üá¶üáπ Austrian":
              return (
                "Red Bull 2 wins" + "\n" + "Austrian Grand Prix: 2018, 2019"
              );
              break;
            case "üá®üá¶ Canadian":
              return "Wolf 1 win" + "\n" + "Canadian Grand Prix: 1977";
          }
        });
    });
  });

  let homeWinByDriversSelected = function () {
    document.getElementsByClassName("bar-chart-text")[0].style.color = "black";
    document.getElementsByClassName("bar-chart-text")[1].style.color = "black";
    document.getElementsByClassName("constructor-win-text")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementById("deu").style.filter = "grayscale(100%)";
    document.getElementById("gbr").style.filter = "grayscale(100%)";
    document.getElementById("fra").style.filter = "grayscale(100%)";
    document.getElementById("ita").style.filter = "grayscale(100%)";
    document.getElementsByClassName("circuits")[0].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[1].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[2].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[3].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[4].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[5].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[6].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[7].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[8].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[9].style.filter =
      "grayscale(100%)";
    document.getElementsByClassName("circuits")[10].style.filter =
      "grayscale(100%)";
  };

  let homeWinByConstructorsSelected = function () {
    document.getElementsByClassName("bar-chart-text")[0].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("bar-chart-text")[1].style.color =
      "rgb(165, 165, 165)";
    document.getElementsByClassName("constructor-win-text")[0].style.color =
      "black";
    document.getElementById("deu").style.filter = "grayscale(0%)";
    document.getElementById("gbr").style.filter = "grayscale(0%)";
    document.getElementById("fra").style.filter = "grayscale(0%)";
    document.getElementById("ita").style.filter = "grayscale(0%)";
    document.getElementsByClassName("circuits")[0].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[1].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[2].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[3].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[4].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[5].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[6].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[7].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[8].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[9].style.filter =
      "grayscale(0%)";
    document.getElementsByClassName("circuits")[10].style.filter =
      "grayscale(0%)";
  };
</script>
